{
    "workflow_name": "Multimodal Vision Test Workflow",
    "description": "Gemini Vision API test with image analysis capabilities",
    "nodes": [
        {
            "id": "vision_prep",
            "type": "operator",
            "config": {
                "code": "print(\"Vision test preparation\")\nproduct_image = state.get('product_image', 's3://test-bucket/sample_product.jpg')\nstate['vision_input'] = {\n    'image_uri': product_image,\n    'analysis_type': 'product_features'\n}\nprint(f\"Vision input prepared: {state['vision_input']}\")",
                "output_key": "vision_input"
            }
        },
        {
            "id": "vision_analysis",
            "type": "aiModel",
            "config": {
                "model": "gemini-1.5-pro",
                "max_tokens": 500,
                "prompt": "이미지를 분석하여 제품의 주요 특징을 설명해주세요. 이미지: {vision_input[image_uri]}",
                "temperature": 0.3,
                "multimodal": true,
                "vision_enabled": true
            }
        },
        {
            "id": "vision_validator",
            "type": "operator",
            "config": {
                "code": "vision_result = state.get('vision_analysis', {})\nif vision_result and state.get('vision_test_enabled'):\n    state['TEST_RESULT'] = '✅ SUCCESS: Vision 테스트 정상 완료'\n    state['vision_features_detected'] = True\nelse:\n    state['TEST_RESULT'] = '⚠️ WARNING: Vision 결과 없음'\n    state['vision_features_detected'] = False\nprint(f\"Vision test result: {state['TEST_RESULT']}\")"
            }
        }
    ],
    "edges": [
        {
            "source": "vision_prep",
            "target": "vision_analysis",
            "type": "normal"
        },
        {
            "source": "vision_analysis",
            "target": "vision_validator",
            "type": "normal"
        }
    ],
    "start_node": "vision_prep"
}
